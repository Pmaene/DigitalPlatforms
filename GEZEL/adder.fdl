dp full_adder_dp (in sel : ns(1); in a, b : ns(1026); out s: ns(1027)) {
    sig b_eff : ns(1026);

    always {
        b_eff = sel == 1 ? (~b + 1) : b;
	    s = a + b_eff;
    }
}

dp display_dp (in sel : ns(1); in a, b : ns(1026); in s: ns(1027)) {
    always {
	    $display("Select: ", $dec, sel, " A: ", $dec, a, " B: ", $dec, b, " Sum: ", $dec, s);
        $finish;
    }
}

dp full_adder_test (out sel : ns(1); out a, b : ns(1026))
{
	sfg do_always
	{
        sel = 0;

		a = 104962539104130296075353756170368710496411507825793354490028237404159128546073484760053791351279640350401520123158655353904860657103597350710475786065446521529691248095509537233456789706229225251012154436988973764049232745942082552567217898292814828450460936965206236289958680120795647573102954787543506387352;
		b = 98405985630537184697309298585794301106229887211665923032281134385157407423994074815178719692223013819897118968361707052773637337531776478904492291141345091815379408844362952652410871566863206499082818296931153012739727295242052717245871047810865235711639199802181951028727380521520781195579025753423014915084;
    }
}

hardwired full_adder_hw (full_adder_test) { do_always; }

dp full_adder_sys
{
    sig sel : ns(1);
	sig a   : ns(1026);
	sig b   : ns(1026);
	sig s   : ns(1027);
	
	use full_adder_test(sel, a, b);
	use full_adder_dp(sel, a, b, s);
	use display_dp(sel, a, b, s);
}

system S
{
	full_adder_sys;
}
